<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <meta>
    <lastUpdated value="2015-09-22T20:02:49.724+10:00" />
  </meta>
  <language value="en-US" />
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="3" />
  </extension>
  <url value="http://cdcfire.bme.gatech.edu/fhir/StructureDefinition/deathcertificate/" />
  <version value="0.1" />
  <name value="DeathCertificateBundle" />
  <status value="draft" />
  <experimental value="true" />
  <publisher value="Georgia Institute of Technology" />
  <contact>
    <name value="Bio-MIBLab" />
    <telecom>
      <system value="email" />
      <value value="biomiblab@bme.gatech.edu" />
      <use value="work" />
    </telecom>
  </contact>
  <date value="2016-02-27T00:00:00-05:00" />
  <description value="A document describing the circumstances of a death, modeled on the CDC's National Vital Statistics System's &quot;U.S. Standard Certificate of Death&quot; (rev. 11/2003)" />
  <useContext>
    <text value="US" />
  </useContext>
  <copyright value="© 2016 Georgia Institute of Technology. All rights reserved." />
  <fhirVersion value="1.0.1" />
  <mapping>
    <identity value="v2" />
    <uri value="http://hl7.org/v2" />
    <name value="HL7 v2" />
  </mapping>
  <mapping>
    <identity value="rim" />
    <uri value="http://hl7.org/v3" />
    <name value="RIM" />
  </mapping>
  <mapping>
    <identity value="w5" />
    <uri value="http://hl7.org/fhir/w5" />
    <name value="W5 Mapping" />
  </mapping>
  <kind value="resource" />
  <constrainedType value="Bundle" />
  <abstract value="false" />
  <base value="http://hl7.org/fhir/StructureDefinition/Bundle" />
  <differential>
    <element>
      <path value="Bundle" />
      <short value="Contains a collection of resources" />
      <definition value="A container for a collection of resources." />
      <min value="0" />
      <max value="*" />
      <type>
        <code value="Bundle" />
      </type>
      <isSummary value="true" />
      <mapping>
        <identity value="v2" />
        <map value="N/A" />
      </mapping>
      <mapping>
        <identity value="rim" />
        <map value="N/A" />
      </mapping>
      <mapping>
        <identity value="w5" />
        <map value="infrastructure.structure" />
      </mapping>
    </element>
    <element>
      <path value="Bundle.type" />
      <short value="document | message | transaction | transaction-response | batch | batch-response | history | searchset | collection" />
      <definition value="Indicates the purpose of this bundle- how it was intended to be used." />
      <comments value="It's possible to use a bundle for other purposes (e.g. a document can be accepted as a transaction). This is primarily defined so that there can be specific rules for some of the bundle types." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="code" />
      </type>
      <fixedCode value="document" />
      <isSummary value="true" />
      <binding>
        <strength value="required" />
        <description value="Indicates the purpose of a bundle - how it was intended to be used." />
        <valueSetReference>
          <reference value="http://hl7.org/fhir/ValueSet/bundle-type" />
        </valueSetReference>
      </binding>
      <mapping>
        <identity value="w5" />
        <map value="class" />
      </mapping>
    </element>
    <element>
      <path value="Bundle.entry" />
      <slicing>
        <rules value="openAtEnd" />
      </slicing>
      <short value="Entry in the bundle - will have a resource, or information" />
      <definition value="An entry in a bundle resource - will either contain a resource, or information about a resource (transactions and history only)." />
      <min value="0" />
      <max value="*" />
      <isSummary value="true" />
    </element>
    <element>
      <path value="Bundle.entry" />
      <name value="DCDocumentComposition" />
      <short value="First entry in the bundle - the Composition at the root of the document" />
      <definition value="An entry in a bundle resource - will either contain a resource, or information about a resource (transactions and history only)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="BackboneElement" />
      </type>
      <constraint>
        <key value="bdl-5" />
        <severity value="error" />
        <human value="must be a resource unless there's a transaction or transaction response" />
        <xpath value="f:resource or f:request or f:response" />
      </constraint>
      <constraint>
        <key value="bdl-6" />
        <severity value="error" />
        <human value="The fullUrl element must be present when a resource is present, and not present otherwise" />
        <xpath value="(not(exists(f:fullUrl)) and not(exists(f:resource))) or (exists(f:fullUrl) and exists(f:resource))" />
      </constraint>
      <isSummary value="true" />
    </element>
    <element>
      <path value="Bundle.entry.resource" />
      <short value="The death certificate composition" />
      <definition value="A single composition" />
      <requirements value="References a specific death certificate composition profile for standardized reporting." />
      <min value="1" />
      <max value="1" />
      <isSummary value="true" />
    </element>
    <element>
      <path value="Bundle.entry" />
      <name value="DCSupportingResources" />
      <short value="Entry in the bundle - will have a resource, or information" />
      <definition value="An entry in a bundle resource - will either contain a resource, or information about a resource (transactions and history only)." />
      <min value="0" />
      <max value="*" />
      <type>
        <code value="BackboneElement" />
      </type>
      <constraint>
        <key value="bdl-5" />
        <severity value="error" />
        <human value="must be a resource unless there's a transaction or transaction response" />
        <xpath value="f:resource or f:request or f:response" />
      </constraint>
      <constraint>
        <key value="bdl-6" />
        <severity value="error" />
        <human value="The fullUrl element must be present when a resource is present, and not present otherwise" />
        <xpath value="(not(exists(f:fullUrl)) and not(exists(f:resource))) or (exists(f:fullUrl) and exists(f:resource))" />
      </constraint>
      <isSummary value="true" />
    </element>
  </differential>
</StructureDefinition>