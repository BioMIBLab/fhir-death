<html>
  <head>
    
    <title>CDC Death Certificate Input Form</title>
    <link rel="stylesheet" type="text/css" href="app.css">
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    
  </head>
  <body>
    <h1><header>U.S. Standard Certificate of Death Form</header></h1>
    <h3>Decedent Information</h3>
    <h4>To be Completed/Verified by Funeral Director</h4>
    <div class="Basic Information">
    <form>
  		Decedent's First name:<br>
  		<input type="text" name="patient_firstname"><br>
 		Decdent's Middle name:<br>
  		<input type="text" name="patient_middlename"><br>
  		Decdent's Last name:<br>
  		<input type="text" name="patient_lastname"><br>
 		
 		Sex:<br>
  		<input type="text" name="sex"><br>
  		Social Security Number:<br>
  		<input type="text" name="SSN"><br>
 		Age - Last Birthday (Years):<br>
  		<input type="text" name="age"><br>
 		If under 1 yr, Months/Days or Hours/Minutes:<br>
  		<input type="text" name="age_infant"><br>
 		Birthplace (City and State or Foreign Country):<br>
  		<input type="text" name="birthplace"><br>

 		Residence (State):<br>
  		<input type="text" name="residence_state"><br>
  		Residence (County):<br>
  		<input type="text" name="residence_county"><br>
  		Residence (City/Town):<br>
  		<input type="text" name="residence_city"><br>
  		Residence (Street and Number):<br>
  		<input type="text" name="residence_street"><br>
  		Residence (Apartment Number):<br>
  		<input type="text" name="residence_apt"><br>
  		Residence (Zip Code):<br>
  		<input type="text" name="residence_zip"><br>
  		Residence (Country): <br>
  		<input type="text" name="residence_country"><br>
  		Inside City Limits?: <br>
  		<input type="radio" name="insidecity" value="yes" /> Yes<br />
  		<input type="radio" name="insidecity" value="no" /> No<br />

  		Ever in US Armed Forces?: <br>
  		<input type="radio" name="military" value="yes" /> Yes<br />
  		<input type="radio" name="military" value="no" /> No<br />


  		Marital Status at Time of Death: <br>
  		<input type="radio" name="marital" value="married" /> Married<br />
  		<input type="radio" name="marital" value="married, but separated" /> Married, but separated<br />
  		<input type="radio" name="marital" value="widowed" /> Widowed<br />
  		<input type="radio" name="marital" value="divorced" /> Divorced<br />
  		<input type="radio" name="marital" value="never married" /> Never Married<br />
  		<input type="radio" name="marital" value="unknown" /> Unknown<br />


  		Surviving Spouse's Name (If wife, give name prior to first marriage):<br>
  		<input type="text" name="spouse_firstname"><br>
 		Spouse's Middle name:<br>
  		<input type="text" name="spouse_middlename"><br>
  		Spouse's Last name:<br>
  		<input type="text" name="spouse_lastname"><br>
  		Father's Name:<br>
  		<input type="text" name="father_firstname"><br>
 		Father's Middle name:<br>
  		<input type="text" name="father_middlename"><br>
  		Father's Last name:<br>
  		<input type="text" name="father_lastname"><br>
   		Mother's Name Prior to Marriage:<br>
  		<input type="text" name="mother_firstname"><br>
 		Mother's Middle name:<br>
  		<input type="text" name="mother_middlename"><br>
  		Mother's Last name:<br>
  		<input type="text" name="mother_lastname"><br>

  		Informant's Name:<br>
  		<input type="text" name="informant_firstname"><br>
 		Informant's Middle name:<br>
  		<input type="text" name="informant_middlename"><br>
  		Informant's Last name:<br>
  		<input type="text" name="informant_lastname"><br>

  		Informant's Relationship to Decedent: <br>
  		<input type="text" name="informant_relationship"><br><br>


  		Informant's Mailing Address: <br>
	 		Residence (State):<br>
	  		<input type="text" name="informant_state"><br>
	  		Residence (County):<br>
	  		<input type="text" name="informant_county"><br>
	  		Residence (City/Town):<br>
	  		<input type="text" name="informant_city"><br>
	  		Residence (Street and Number):<br>
	  		<input type="text" name="informant_street"><br>
	  		Residence (Apartment Number):<br>
	  		<input type="text" name="informant_apt"><br>
	  		Residence (Zip Code):<br>
	  		<input type="text" name="informant_zip"><br>
	  		Residence (Country): <br>
	  		<input type="text" name="informant_country"><br><br>

	  	Place of Death: <br>
	  	If Death Occurred in a Hospital: <br>
	  	<select name="place_of_death">
	  		<option></option>
	  		<option>Hospital</option>
			<option>Emergency Room/ Outpatient</option>
			<option>Dead on Arrival</option>
		</select>
		<select name="place_of_death">
			<option> </option>
	  		<option>Hospice Facility</option>
			<option>Nursing home/Long term care facility</option>
			<option>Decedent's home</option>
		</select>
		If Other (specify):
	  	<input type="text" name="place_of_death"><br><br>

	  	Facility Name: <br>
	  	<input type="text" name="POD_name"><br>

	  	Facility location
	  	<input type="text" name="POD_state"><br>
	  		Funeral Facility (County):<br>
	  		<input type="text" name="POD_county"><br>
	  		Funeral Facility  (City/Town):<br>
	  		<input type="text" name="POD_city"><br>
	  		Funeral Facility  (Street and Number):<br>
	  		<input type="text" name="POD_street"><br>
	  		Funeral Facility  (Apartment Number):<br>
	  		<input type="text" name="POD_apt"><br>
	  		Funeral Facility  (Zip Code):<br>
	  		<input type="text" name="POD_zip"><br>
	  		Funeral Facility  (Country): <br>
	  		<input type="text" name="POD_country"><br><br>
	  	
	  	Method of Disposition: <br>
	  	<select name="funeral_method">
	  		<option></option>
	  		<option>Burial</option>
	  		<option>Cremation</option>
	  		<option>Donation</option>
			<option>Entombment</option>
			<option>Removal from State</option>
		</select>
		If Other (specify):
	  	<input type="text" name="funeral_method"><br>
	  	Place of Disposition (name): <br>
	  	<input type="text" name="funeral_name"><br>

	  	<input type="text" name="funeral_state"><br>
	  		Funeral Facility (County):<br>
	  		<input type="text" name="funeral_county"><br>
	  		Funeral Facility  (City/Town):<br>
	  		<input type="text" name="funeral_city"><br>
	  		Funeral Facility  (Street and Number):<br>
	  		<input type="text" name="funeral_street"><br>
	  		Funeral Facility  (Apartment Number):<br>
	  		<input type="text" name="funeral_apt"><br>
	  		Funeral Facility  (Zip Code):<br>
	  		<input type="text" name="funeral_zip"><br>
	  		Funeral Facility  (Country): <br>
	  		<input type="text" name="funeral_country"><br><br>

	  	License Number (of Licensee): <br>
	  	<input type="text" name="licensee_number"><br>

	<h3>Conditions of Death</h3>
    <h4>To be Completed by Medical Examiner</h4>
   	 	Date Pronounced Dead: <br>
	  	<input type="text" name="death_date"><br>
	  	Time Pronounced Dead: <br>
	  	<input type="text" name="death_time"><br>
	  	License Number: <br>
	  	<input type="text" name="examiner_number"><br>
	  	Date Signed (Mo/Day/Yr): <br>
	  	<input type="text" name="examiner_sign_date"><br>
	  	Actual or Presumed Date of Death (Mo/Day/Yr): <br>
	  	<input type="text" name="actual_death_date"><br>
	  	Actual or Presumed Time of Death: <br>
	  	<input type="text" name="actual_death_time"><br>

	  	Was Medical Examiner or Coroner Contacted?: <br>
  		<input type="radio" name="examiner_contacted" value="yes" /> Yes<br />
  		<input type="radio" name="examiner_contacted" value="no" /> No<br />

  		Was an Autopsy Performed?: <br>
  		<input type="radio" name="autopsy" value="yes" /> Yes<br />
  		<input type="radio" name="autopsy" value="no" /> No<br />

  		Were Autopsy Findings Available to Complete the Case of Death?: <br>
  		<input type="radio" name="autopsy_available" value="yes" /> Yes<br />
  		<input type="radio" name="autopsy_available" value="no" /> No<br /> <br>

  		Did tobacco use contribute to death?: <br>
  		<input type="radio" name="tobacco" value="yes" /> Yes<br />
  		<input type="radio" name="tobacco" value="no" /> No<br />
  		<input type="radio" name="tobacco" value="Probably" /> Probably<br />
  		<input type="radio" name="tobacco" value="Unknown" /> Unknown<br /> <br>

  		If female: <br>
  		<input type="radio" name="pregnancy" value="Not pregnant within past year" /> Not pregnant within past year<br />
  		<input type="radio" name="pregnancy" value="Pregnant at time of death" /> regnant at time of death<br />
  		<input type="radio" name="pregnancy" value="Not pregnant, but pregnant within 42 days of death" /> Not pregnant, but pregnant within 42 days of death<br />
  		<input type="radio" name="pregnancy" value="Not pregnant, but pregnant 43 days to 1 year before death" /> Not pregnant, but pregnant 43 days to 1 year before death<br />
  		<input type="radio" name="pregnancy" value="Unknown if pregnant within the past year" /> Unknown if pregnant within the past year<br /> <br>

  		Manner of Death: <br>
  		<input type="radio" name="death_manner" value="natural" /> Natural<br />
  		<input type="radio" name="death_manner" value="homicide" /> Homicide<br />
  		<input type="radio" name="death_manner" value="accident" /> Accident<br />
  		<input type="radio" name="death_manner" value="suicide" /> Suicide<br />
  		<input type="radio" name="death_manner" value="pending investigation" /> Pending Investigation<br />
  		<input type="radio" name="death_manner" value="could not be determined" /> Could not be Determined<br />

  		Date of Injury (Mo/Day/Yr): <br>
	  	<input type="text" name="injury_date"><br>
	  	Time of Injury: <br>
	  	<input type="text" name="injury_time"><br>
	  	Place of Injury: <br>
	  	<input type="text" name="injury_location"><br>
	  	Injury at Work?: <br>
  		<input type="radio" name="injury_workrelated" value="yes" /> Yes<br />
  		<input type="radio" name="injury_workrelated" value="no" /> No<br /> <br>

  		Location of Injury:<br>
  		<input type="text" name="injury_state"><br>
  		Residence (County):<br>
  		<input type="text" name="injury_county"><br>
  		Residence (City/Town):<br>
  		<input type="text" name="injury_city"><br>
  		Residence (Street and Number):<br>
  		<input type="text" name="injury_street"><br>
  		Residence (Apartment Number):<br>
  		<input type="text" name="injury_apt"><br>
  		Residence (Zip Code):<br>
  		<input type="text" name="injury_zip"><br>
  		Residence (Country): <br>
  		<input type="text" name="injury_country"><br>

  		Injury Description:<br>
  		<textarea rows="3" cols="20"> Describe how injury occurred...</textarea><br>

		If Transportation Injury, Specify <br>
	  	<select name="injury_transportation">
	  		<option></option>
	  		<option>Driver/Operator</option>
	  		<option>Passenger</option>
	  		<option>Pedestrial</option>
			<option>Entombment</option>
		</select>
		If Other (specify):
	  	<input type="text" name="injury_transportation"><br>

	  	Certifier: <br>
	  	<input type="text" name="certifier"><br>

	  	Injury at Work?: <br>
  		<input type="radio" name="certifier" value="Certifying physician - To the best of my knowledge, death occurred due to the cause(s) and manner stated" /> Certifying physician - To the best of my knowledge, death occurred due to the cause(s) and manner stated<br />
  		<input type="radio" name="certifier" value="Pronouncing & Certifying physician - To the best of my knowledge, death occurred at the time, date, and place and due to the cause(s) and manner stated." /> Pronouncing & Certifying physician - To the best of my knowledge, death occurred at the time, date, and place and due to the cause(s) and manner stated.<br /> 
  		<input type="radio" name="certifier" value="Medical Examiner/Coroner - On the basis of examination, and/or investigation, in my opinion, death occurred at the time, date, and place, and due to the cause(s) and manner stated" /> Medical Examiner/Coroner - On the basis of examination, and/or investigation, in my opinion, death occurred at the time, date, and place, and due to the cause(s) and manner stated<br /><br>

  		Name, Address, and Zip Code of Person Completing Cause of Death:
  		First name:<br>
  		<input type="text" name="certifier_firstname"><br>
 		Middle name:<br>
  		<input type="text" name="certifier_middlename"><br>
  		Last name:<br>
  		<input type="text" name="certifier_lastname"><br>

 		Residence (State):<br>
  		<input type="text" name="certifier_state"><br>
  		Residence (County):<br>
  		<input type="text" name="certifier_county"><br>
  		Residence (City/Town):<br>
  		<input type="text" name="certifier_city"><br>
  		Residence (Street and Number):<br>
  		<input type="text" name="certifier_street"><br>
  		Residence (Apartment Number):<br>
  		<input type="text" name="certifier_apt"><br>
  		Residence (Zip Code):<br>
  		<input type="text" name="certifier_zip"><br>
  		Residence (Country): <br>
  		<input type="text" name="certifier_country"><br><br>

  		Title of Certifier: <br>
  		<input type="text" name="certifier_title"><br>
  		License Number: <br>
  		<input type="text" name="certifier_licensenum"><br>
  		Date certified: <br>
  		<input type="text" name="certifier_date_of_certif"><br>
  		Date filed (for registar): <br>
  		<input type="text" name="registar_datefiled"><br><br>


		Decedent's Education - Check the box that best describes the highest degree or level of school completed at teh time of death: <br>
  		<input type="radio" name="education" value="8th grade or less" /> 8th grade or less<br />
  		<input type="radio" name="education" value="9 - 12th grade; no diploma" /> 9 - 12th grade; no diploma<br />
  		<input type="radio" name="education" value="High school graduate or GED completed" /> High school graduate or GED completed<br />
  		<input type="radio" name="education" value="Associate degree (e.g. AA, AS)" /> Associate degree (e.g. AA, AS)<br />
  		<input type="radio" name="education" value="Bachelor's degree (e.g., BA, AB, BS)" /> Bachelor's degree (e.g., BA, AB, BS)<br />
  		<input type="radio" name="education" value="Master's degree (e.g. MA, MS, MEng, MEd, MSW, MBA)" /> Master's degree (e.g. MA, MS, MEng, MEd, MSW, MBA)<br />
  		<input type="radio" name="education" value="Doctorate (e.g. PhD, EdD) or Professional degree (e.g., MD, DDS, DVM, LLB, JD)" /> Doctorate (e.g. PhD, EdD) or Professional degree (e.g., MD, DDS, DVM, LLB, JD)<br /><br>

		Decedent of Hispanic Origin? Check the box that best describes whether teh decdent is Spanish/Hispanic/Latino.  Check the "No" box if decdent is not Spanish/Hispanic/ Latino <br>
  		<input type="radio" name="hispanic" value="No, not Spanish/Hispanic/Latino" /> No, not Spanish/Hispanic/Latino<br />
  		<input type="radio" name="hispanic" value="Yes, Mexican, Mexican American, Chicano" /> Yes, Mexican, Mexican American, Chicano/Hispanic/Latino<br />
  		<input type="radio" name="hispanic" value="Yes, Puerto Rican" /> Yes, Puerto Rican<br />
  		<input type="radio" name="hispanic" value="Yes, Cuban" /> Yes, Cuban<br />
  		Other
  		<input type="text" name="hispanic"><br>

  		Decedent's Race (Check one or more races to indicate what the decedent considered himself or herself to be):
  		<input type="checkbox" name="race" value="White"> White<br>
  		<input type="checkbox" name="race" value="Black of African American"> Black of African American<br>
  		<input type="checkbox" name="race" value="American Indian or Alaska Native"> American Indian or Alaska Native (Name of enrolled or principal tribe) <input type="text" name="race"><br>
  		<input type="checkbox" name="race" value="Asian Indian"> Asian Indian <br> 
  		<input type="checkbox" name="race" value="Chinese"> Chinese<br> 
  		<input type="checkbox" name="race" value="Filipino"> Filipino <br> 
  		<input type="checkbox" name="race" value="Japanese"> Japanese<br> 
  		<input type="checkbox" name="race" value="Korean"> Korean<br> 
  		<input type="checkbox" name="race" value="Vietnamese"> Vietnamese<br>
  		<input type="checkbox" name="race" value="Other Asian"> Other Asian <input type="text" name="race"><br>
  		<input type="checkbox" name="race" value="Native Hawaiian"> Native Hawaiian<br>
  		<input type="checkbox" name="race" value="Guamanian or Chamorro"> Guamanian or Chamorro<br>
  		<input type="checkbox" name="race" value="Samoan"> Samoan<br>
  		<input type="checkbox" name="race" value="Other Pacific Islander (Specify)"> Other Pacific Islander <input type="text" name="race"><br>
  		<input type="checkbox" name="race" value="Other"> Other <input type="text" name="race"><br>





  		Decedent's Usual Occupation (Indicate type of work done during most of working life): <br>
  		<input type="text" name="patient_job"><br>
  		Kind of Business/Industry: <br>
  		<input type="text" name="patient_industry"><br>


	</form>

    </div>
    
    <!--  LOAD IN EXTERNAL JS RESOURCES  -->
    
    <script type="text/javascript" charset="utf-8" 
            src="./lib/d3.min.js"></script> <!-- should really just use jquery -->
    <script type="text/javascript" charset="utf-8" 
            src="./lib/fhir-client.min.js"></script> <!-- should really just use jquery -->
    

    <script type="text/javascript">
      
      // adapted from smart-on-fhir demo app
      
      var connected = false;
      var clientId = "gt-cdc-fhir-death"
      var secret = null;
      
      var urlparams = {}
      location.search.substr(1).split("&").forEach(function(element) {
        urlparams[element.split("=")[0]] = decodeURIComponent(element.split("=")[1]);
      }); // stackoverflow 5448545
      
      var serviceUrl = urlparams.iss;
      var launchUrl = window.location.href;
      var redirectUrl = launchUrl.replace("launch.html","");
      
      var launchContextId = urlparams.launch;
      
      var scope = [
        "patient/*.read",
        "launch"
      ].join(" ");
      
      var state = Math.round(Math.random()*100000000).toString();
      
      var conformanceUrl = serviceUrl + "/metadata"
      
      d3.json(conformanceUrl, function(d) {
        
        var authUrl, tokenUrl;
        
        var smart = d.rest[0].security.extension.filter(function (e) {
           return (e.url === "http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris");
        });
        smart[0].extension.forEach(function(arg, index, array){
          if (arg.url === "authorize") {
            authUrl = arg.valueUri;
          } else if (arg.url === "token") {
            tokenUrl = arg.valueUri;
          }
        });
        
        sessionStorage[state] = JSON.stringify({
            clientId: clientId,
            secret: secret,
            serviceUrl: serviceUrl,
            redirectUrl: redirectUrl,
            tokenUrl: tokenUrl
        });
        
        FHIR.oauth2.authorize({
          client_id: clientId,
          scope: scope,
          state: state
        });
        
      });
      
    </script>
    
  </body>
</html>
